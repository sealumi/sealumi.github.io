<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noobtuber's Kitchen â€“ Shift Panel</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      padding: 40px;
      max-width: 600px;
      width: 100%;
    }

    h1 {
      color: #333;
      margin-bottom: 30px;
      text-align: center;
      font-size: 28px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      color: #555;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s;
      font-family: inherit;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    textarea {
      resize: vertical;
      min-height: 150px;
      font-family: 'Courier New', monospace;
    }

    .helper-text {
      font-size: 12px;
      color: #888;
      margin-top: 5px;
    }

    button {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    #status {
      margin-top: 20px;
      padding: 15px;
      border-radius: 6px;
      font-size: 14px;
      white-space: pre-wrap;
      word-wrap: break-word;
      display: none;
    }

    #status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }

    #status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      display: block;
    }

    #status.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Shift Submission</h1>
    
    <div class="form-group">
      <label for="shiftName">Shift Name</label>
      <input id="shiftName" type="text" placeholder="e.g., Morning Shift A">
    </div>

    <div class="form-group">
      <label for="host">Host Name</label>
      <input id="host" type="text" placeholder="e.g., John Doe">
    </div>

    <div class="form-group">
      <label for="entries">Shift Entries</label>
      <textarea id="entries" placeholder="username,xp,rank&#10;player1,150,Chef&#10;player2,200,Senior Chef"></textarea>
      <div class="helper-text">Format: username,xp,rank (one entry per line)</div>
    </div>

    <button onclick="submitShift()">Submit Shift</button>
    
    <div id="status"></div>
  </div>

  <script>
    const ALLOWED_RANKS = [
      "Kitchen Trainee",
      "Junior Chef",
      "Chef",
      "Station Cook",
      "Senior Chef",
      "Lead Chef",
      "Shift Supervisor",
      "Sous Chef",
      "Head Chef",
      "Supervisory Chef",
      "Culinary Chef",
      "Operations Coordinator",
      "Chief of Staff",
      "Deputy Franchise Director",
      "Franchise Director",
      "Administrator"
    ];

    function submitShift() {
      const statusEl = document.getElementById('status');
      const shiftName = document.getElementById('shiftName').value.trim();
      const host = document.getElementById('host').value.trim();
      const entries = document.getElementById('entries').value.trim();

      // Clear previous status
      statusEl.className = '';
      statusEl.style.display = 'none';

      // Validation
      if (!shiftName) {
        showStatus('error', 'Please enter a shift name.');
        return;
      }

      if (!host) {
        showStatus('error', 'Please enter a host name.');
        return;
      }

      if (!entries) {
        showStatus('error', 'Please enter at least one shift entry.');
        return;
      }

      // Parse and validate entries
      const lines = entries.split('\n').filter(line => line.trim());
      const parsedEntries = [];
      const errors = [];

      lines.forEach((line, index) => {
        const parts = line.split(',').map(p => p.trim());
        
        if (parts.length !== 3) {
          errors.push(`Line ${index + 1}: Invalid format (expected 3 fields, got ${parts.length})`);
          return;
        }

        const [username, xp, rank] = parts;

        if (!username) {
          errors.push(`Line ${index + 1}: Username is empty`);
        }

        if (!xp || isNaN(xp)) {
          errors.push(`Line ${index + 1}: XP must be a number`);
        }

        if (!rank) {
          errors.push(`Line ${index + 1}: Rank is empty`);
        } else if (!ALLOWED_RANKS.includes(rank)) {
          errors.push(
            `Line ${index + 1}: Invalid rank "${rank}".\n` +
            `Allowed ranks: ${ALLOWED_RANKS.join(", ")}`
          );
        }

        if (errors.length === 0 || errors.length < index + 1) {
          parsedEntries.push({
            username,
            xp: parseInt(xp),
            rank
          });
        }
      });

      if (errors.length > 0) {
        showStatus('error', 'Validation errors:\n' + errors.join('\n'));
        return;
      }

      // Create submission data
      const shiftData = {
        shiftName,
        host,
        entries: parsedEntries,
        timestamp: new Date().toISOString()
      };

      // Show success message with data summary
      showStatus('success', 
        `Shift submitted successfully!\n\n` +
        `Shift: ${shiftName}\n` +
        `Host: ${host}\n` +
        `Entries: ${parsedEntries.length}\n` +
        `Total XP: ${parsedEntries.reduce((sum, e) => sum + e.xp, 0)}\n\n` +
        `Data:\n${JSON.stringify(shiftData, null, 2)}`
      );

      console.log('Shift data:', shiftData);
    }

    function showStatus(type, message) {
      const statusEl = document.getElementById('status');
      statusEl.className = type;
      statusEl.textContent = message;
      statusEl.style.display = 'block';
    }
  </script>
</body>
</html>